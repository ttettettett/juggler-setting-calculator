<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ジャグラー設定判別ツール</title>
    <style>
        body {
            display: flex;
            flex-direction: column;
            height: 100vh;
            margin: 0;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 10px;
        }
        th, td {
            border: 1px solid black;
            text-align: center;
            padding: 10px;
            font-size: 24px;
            white-space: nowrap;
            min-width: 100px;
        }
        input[type="number"], select {
            width: 100%;
            height: 100%;
            font-size: 24px;
            text-align: center;
            border: none;
        }
        
        select {
            height: 80px;
        }
        
        .button-container {
            display: flex;
            flex-direction: column;
            gap: 5px;
            padding: 5px;
            flex-grow: 1;
        }
        button {
            flex-grow: 1;
            width: 100%;
            border: none;
            cursor: pointer;
            font-size: 32px;
            padding: 15px;
        }
        .game {
            background-color: lightblue;
        }
        .bb {
            background-color: lightcoral;
        }
        .rb {
            background-color: lightgreen;
        }
        @media screen and (max-width: 600px) {
            th, td {
                font-size: 16px;
                min-width: 60px;
            }
            input[type="number"], select {
                font-size: 16px;
            }
            button {
                font-size: 20px;
                padding: 10px;
            }
        }
    </style>
</head>
<body>
    <div>
        <select id="model" onchange="updateSettings()" style="width: 100%;">
            <option value="model1">アイムジャグラーEX（6号機）</option>
            <option value="model2">マイジャグラーV</option>
            <option value="model3">ファンキージャグラー2</option>
        </select>
    </div>
    <table>
        <tr>
            <th></th>
            <th>カウント</th>
            <th>確率</th>
            <th>設定</th>
        </tr>
        <tr>
            <th style="background-color: lightblue;">ゲーム</th>
            <td><input type="number" id="gameCount" value="0"></td>
            <td>-</td>
            <td>-</td>
        </tr>
        <tr>
            <th style="background-color: lightcoral;">BB</th>
            <td><input type="number" id="bbCount" value="0"></td>
            <td id="bbProbability">-</td>
            <td id="bbSetting">-</td>
        </tr>
        <tr>
            <th style="background-color: lightgreen;">RB</th>
            <td><input type="number" id="rbCount" value="0"></td>
	        <td id="rbProbability">-</td>
	        <td id="rbSetting">-</td>
	    </tr>
	    <tr>
	        <th>合算 (BB+RB)</th>
	        <td id="total"></td>
	        <td id="totalProbability">-</td>
	        <td id="totalSetting">-</td>
	    </tr>
	</table>
	<div class="button-container">
	    <button class="game" onclick="incrementGame(10)">ゲーム+10</button>
	    <button class="game" onclick="incrementGame(100)">ゲーム+100</button>
	    <button class="bb" onclick="incrementBB(1)">BB+1</button>
	    <button class="rb" onclick="incrementRB(1)">RB+1</button>
	</div>
	<script>
	    const modelSettings = {
	        model1: [
	            { bb: 1 / 273.1, rb: 1 / 439.8, total: 1 / 168.5 },
	            { bb: 1 / 269.7, rb: 1 / 399.6, total: 1 / 161.0 },
	            { bb: 1 / 269.7, rb: 1 / 331.0, total: 1 / 148.6 },
	            { bb: 1 / 259.0, rb: 1 / 315.1, total: 1 / 142.2 },
	            { bb: 1 / 259.0, rb: 1 / 255.0, total: 1 / 128.5 },
	            { bb: 1 / 255.0, rb: 1 / 255.0, total: 1 / 127.5 }
	        ],
	        model2: [
	            { bb: 1 / 273.1, rb: 1 / 409.6, total: 1 / 163.8 },
	            { bb: 1 / 270.8, rb: 1 / 385.5, total: 1 / 159.1 },
	            { bb: 1 / 266.4, rb: 1 / 336.1, total: 1 / 148.6 },
	            { bb: 1 / 254.0, rb: 1 / 290.0, total: 1 / 135.4 },
	            { bb: 1 / 240.1, rb: 1 / 268.6, total: 1 / 126.8 },
	            { bb: 1 / 229.1, rb: 1 / 229.1, total: 1 / 114.6 }
	        ],
	        model3: [
	            { bb: 1 / 266.4, rb: 1 / 439.8, total: 1 / 165.9 },
	            { bb: 1 / 259.0, rb: 1 / 407.1, total: 1 / 158.3 },
	            { bb: 1 / 256.0, rb: 1 / 366.1, total: 1 / 150.7 },
	            { bb: 1 / 249.2, rb: 1 / 322.8, total: 1 / 140.6 },
	            { bb: 1 / 240.1, rb: 1 / 299.3, total: 1 / 133.2 },
	            { bb: 1 / 219.9, rb: 1 / 262.1, total: 1 / 119.5 }
	        ]
	    };
	    let currentSettings = modelSettings["model1"];

	    function incrementGame(value) {
	        const gameCountInput = document.getElementById("gameCount");
	        const newValue = parseInt(gameCountInput.value) + value;
	        gameCountInput.value = newValue;
	        updateSettings();
	    }

	    function incrementBB(value) {
	        const bbCountInput = document.getElementById("bbCount");
	        const newValue = parseInt(bbCountInput.value) + value;
	        bbCountInput.value = newValue;
	        updateSettings();
	    }

	    function incrementRB(value) {
	        const rbCountInput = document.getElementById("rbCount");
	        const newValue = parseInt(rbCountInput.value) + value;
	        rbCountInput.value = newValue;
	        updateSettings();
	    }

	    function updateSettings() {
	        const modelSelect = document.getElementById("model");
	        const selectedModel = modelSelect.value;
	        currentSettings = modelSettings[selectedModel];
	        calculate();
	    }

	    function calculate() {
	        const gameCount = parseInt(document.getElementById("gameCount").value) || 0;
	        const bbCount = parseInt(document.getElementById("bbCount").value) || 0;
	        const rbCount = parseInt(document.getElementById("rbCount").value) || 0;

	        const bbProbability = gameCount ? bbCount / gameCount : 0;
	        const rbProbability = gameCount ? rbCount / gameCount : 0;
	        const totalProbability = gameCount ? (bbCount + rbCount) / gameCount : 0;

	        document.getElementById("bbProbability").innerText = (bbProbability * 100).toFixed(2) + "%";
	        document.getElementById("rbProbability").innerText = (rbProbability * 100).toFixed(2) + "%";
	        document.getElementById("totalProbability").innerText = (totalProbability * 100).toFixed(2) + "%";

	        document.getElementById("total").innerText = bbCount + rbCount;

	        document.getElementById("bbSetting").innerText = findSetting(bbProbability, "bb");
	        document.getElementById("rbSetting").innerText = findSetting(rbProbability, "rb");
	        document.getElementById("totalSetting").innerText = findSetting(totalProbability, "total");
	    }

	    function findSetting(value, type) {
	        let minDiff = Infinity;
	        let setting = 0;

	        currentSettings.forEach((config, index) => {
	            const diff = Math.abs(value - config[type]);
	            if (diff < minDiff) {
	                minDiff = diff;
	                setting = index + 1;
	            }
	        });

	        return setting;
	    }
	</script>
</body>
</html>

